<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HearThis: HearThis.Script.MigrationProgressTracker Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="HearThis.ico"/></td>
  <td id="projectalign">
   <div id="projectname">HearThis
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_hear_this_1_1_script_1_1_migration_progress_tracker.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_hear_this_1_1_script_1_1_migration_progress_tracker-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">HearThis.Script.MigrationProgressTracker Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is a companion to ScriptProviderBase.DoDataMigration. When a migration step requires chapter-by-chapter migration and the need to resume safely is interrupted, this class can track how far the migration got. If the last book/chapter started are different from the last book/chapter completed, then the last one started is in an inconsistent state and will (presumably) need manual intervention to be migrated correctly. Note that this class does not store the data version number since that is stored in the (permanently persisted) project info file. The file that this class gets serialized to should only exist if a migration from the version stored in that file was interrupted.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab71c65a01edf65a3fb3e6a189fc32938" id="r_ab71c65a01edf65a3fb3e6a189fc32938"><td class="memItemLeft" align="right" valign="top"><a id="ab71c65a01edf65a3fb3e6a189fc32938" name="ab71c65a01edf65a3fb3e6a189fc32938"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MigrationProgressTracker</b> ()</td></tr>
<tr class="memdesc:ab71c65a01edf65a3fb3e6a189fc32938"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required for deserialization. <br /></td></tr>
<tr class="separator:ab71c65a01edf65a3fb3e6a189fc32938"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24278503623c94887c628db8262c2d41" id="r_a24278503623c94887c628db8262c2d41"><td class="memItemLeft" align="right" valign="top"><a id="a24278503623c94887c628db8262c2d41" name="a24278503623c94887c628db8262c2d41"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Start</b> (int book, int chapter)</td></tr>
<tr class="separator:a24278503623c94887c628db8262c2d41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4821e2f188e121f65d8dc7dca13d3572" id="r_a4821e2f188e121f65d8dc7dca13d3572"><td class="memItemLeft" align="right" valign="top"><a id="a4821e2f188e121f65d8dc7dca13d3572" name="a4821e2f188e121f65d8dc7dca13d3572"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>NoteCompletedCurrentBookAndChapter</b> ()</td></tr>
<tr class="separator:a4821e2f188e121f65d8dc7dca13d3572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55da221ef7f67322f5fec9553df406a0" id="r_a55da221ef7f67322f5fec9553df406a0"><td class="memItemLeft" align="right" valign="top"><a id="a55da221ef7f67322f5fec9553df406a0" name="a55da221ef7f67322f5fec9553df406a0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>NoteMigrationComplete</b> ()</td></tr>
<tr class="separator:a55da221ef7f67322f5fec9553df406a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3af2af5f1d68b7d5c5fb82c2c0dae96" id="r_ae3af2af5f1d68b7d5c5fb82c2c0dae96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3af2af5f1d68b7d5c5fb82c2c0dae96">AddCurrentChapterAsPotentiallyNeedingMigration</a> (string currentBookName)</td></tr>
<tr class="memdesc:ae3af2af5f1d68b7d5c5fb82c2c0dae96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the current chapter (i.e., the last book/chapter started) to the collection of chapters potentially needing manual migration.  <br /></td></tr>
<tr class="separator:ae3af2af5f1d68b7d5c5fb82c2c0dae96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a24d94f99bb17fcd17c41ead2a1d7eb5c" id="r_a24d94f99bb17fcd17c41ead2a1d7eb5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_hear_this_1_1_script_1_1_migration_progress_tracker.html">MigrationProgressTracker</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24d94f99bb17fcd17c41ead2a1d7eb5c">Create</a> (string projectFolder, Func&lt; int, string &gt; getBookName)</td></tr>
<tr class="memdesc:a24d94f99bb17fcd17c41ead2a1d7eb5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a tracker, either by deserializing from a file for the given project or by constructing and initializing a new one. Note that if the file exists and the last started chapter was not noted as complete, an entry will be added automatically to the list of chapters potentially needing manual migration.  <br /></td></tr>
<tr class="separator:a24d94f99bb17fcd17c41ead2a1d7eb5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ab70e2346b9c8feba24068a8f5103f819" id="r_ab70e2346b9c8feba24068a8f5103f819"><td class="memItemLeft" align="right" valign="top"><a id="ab70e2346b9c8feba24068a8f5103f819" name="ab70e2346b9c8feba24068a8f5103f819"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>LastBookStarted</b><code> [get, set]</code></td></tr>
<tr class="separator:ab70e2346b9c8feba24068a8f5103f819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e2efdc125d030f0d75d4704427e96d4" id="r_a5e2efdc125d030f0d75d4704427e96d4"><td class="memItemLeft" align="right" valign="top"><a id="a5e2efdc125d030f0d75d4704427e96d4" name="a5e2efdc125d030f0d75d4704427e96d4"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>LastBookCompleted</b><code> [get, set]</code></td></tr>
<tr class="separator:a5e2efdc125d030f0d75d4704427e96d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dc082edf4e7d90dd5cb3e47a0a69efc" id="r_a8dc082edf4e7d90dd5cb3e47a0a69efc"><td class="memItemLeft" align="right" valign="top"><a id="a8dc082edf4e7d90dd5cb3e47a0a69efc" name="a8dc082edf4e7d90dd5cb3e47a0a69efc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>LastChapterStarted</b><code> [get, set]</code></td></tr>
<tr class="separator:a8dc082edf4e7d90dd5cb3e47a0a69efc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703af4702caf31024a47c570aaeb9756" id="r_a703af4702caf31024a47c570aaeb9756"><td class="memItemLeft" align="right" valign="top"><a id="a703af4702caf31024a47c570aaeb9756" name="a703af4702caf31024a47c570aaeb9756"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>LastChapterCompleted</b><code> [get, set]</code></td></tr>
<tr class="separator:a703af4702caf31024a47c570aaeb9756"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb24e4d59058076fe3f9c51164bf4aa8" id="r_adb24e4d59058076fe3f9c51164bf4aa8"><td class="memItemLeft" align="right" valign="top"><a id="adb24e4d59058076fe3f9c51164bf4aa8" name="adb24e4d59058076fe3f9c51164bf4aa8"></a>
SerializableDictionary&lt; string, List&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>ChaptersPotentiallyNeedingManualMigration</b><code> [get, set]</code></td></tr>
<tr class="separator:adb24e4d59058076fe3f9c51164bf4aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564ffdd0447f5996e9bf8e2c75711e9e" id="r_a564ffdd0447f5996e9bf8e2c75711e9e"><td class="memItemLeft" align="right" valign="top"><a id="a564ffdd0447f5996e9bf8e2c75711e9e" name="a564ffdd0447f5996e9bf8e2c75711e9e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>PreviousMigrationWasInterrupted</b><code> [get]</code></td></tr>
<tr class="separator:a564ffdd0447f5996e9bf8e2c75711e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97e953bc442aa94bd89738b0bb3dc45f" id="r_a97e953bc442aa94bd89738b0bb3dc45f"><td class="memItemLeft" align="right" valign="top"><a id="a97e953bc442aa94bd89738b0bb3dc45f" name="a97e953bc442aa94bd89738b0bb3dc45f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>ChapterWasInterrupted</b><code> [get]</code></td></tr>
<tr class="separator:a97e953bc442aa94bd89738b0bb3dc45f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a companion to ScriptProviderBase.DoDataMigration. When a migration step requires chapter-by-chapter migration and the need to resume safely is interrupted, this class can track how far the migration got. If the last book/chapter started are different from the last book/chapter completed, then the last one started is in an inconsistent state and will (presumably) need manual intervention to be migrated correctly. Note that this class does not store the data version number since that is stored in the (permanently persisted) project info file. The file that this class gets serialized to should only exist if a migration from the version stored in that file was interrupted. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae3af2af5f1d68b7d5c5fb82c2c0dae96" name="ae3af2af5f1d68b7d5c5fb82c2c0dae96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3af2af5f1d68b7d5c5fb82c2c0dae96">&#9670;&#160;</a></span>AddCurrentChapterAsPotentiallyNeedingMigration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HearThis.Script.MigrationProgressTracker.AddCurrentChapterAsPotentiallyNeedingMigration </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>currentBookName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds the current chapter (i.e., the last book/chapter started) to the collection of chapters potentially needing manual migration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentBookName</td><td>Caller is responsible for ensuring that this is the book name corresponding to LastBookStarted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a24d94f99bb17fcd17c41ead2a1d7eb5c" name="a24d94f99bb17fcd17c41ead2a1d7eb5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24d94f99bb17fcd17c41ead2a1d7eb5c">&#9670;&#160;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_hear_this_1_1_script_1_1_migration_progress_tracker.html">MigrationProgressTracker</a> HearThis.Script.MigrationProgressTracker.Create </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>projectFolder</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Func&lt; int, string &gt;</td>          <td class="paramname"><span class="paramname"><em>getBookName</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a tracker, either by deserializing from a file for the given project or by constructing and initializing a new one. Note that if the file exists and the last started chapter was not noted as complete, an entry will be added automatically to the list of chapters potentially needing manual migration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">getBookName</td><td>Function to get the book name from the last book started</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/HearThis/Script/<b>MigrationProgressTracker.cs</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_hear_this.html">HearThis</a></li><li class="navelem"><a class="el" href="namespace_hear_this_1_1_script.html">Script</a></li><li class="navelem"><a class="el" href="class_hear_this_1_1_script_1_1_migration_progress_tracker.html">MigrationProgressTracker</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
